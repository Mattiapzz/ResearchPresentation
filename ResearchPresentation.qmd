---
title: "Optimal Control, Planning, and Intelligent Vehicles"
subtitle: "Leveraging optimal control and sampling-based methods for motion planning in autonomous driving"
bibliography: bibliography.bib
cls: IEEEtran.cls
author: 
  - name: "Mattia Piazza"
    email: "mattia.piazza@unitn.it"
    affiliation: "PhD Candidate"
  - name: "Prof. Francesco Biral"
    email: "francesco.biral@unitn.it"
    affiliation: "Supervisor"
  - name: "Prof. Mauro Da Lio"
    email: "mauro.dalio@unitn.it"
    affiliation: "Co-supervisor"
date: today
# date-format: long
date-format: "D MMMM YYYY"
resources: data
execute: 
  enabled: true
slide-level: 2
format:
  revealjs: 
    # Output file
    output-file: index.html
    # Table of Contents
    toc: true
    toc_float: true
    toc-depth: 1
    toc-location: body
    toc-title: "Contents"
    # Generate a self-contained file
    # self-contained: true
    self-contained-math: true
    # template-partials:
    #   - title-slide.html
    theme: [ custom.scss]
    slideNumber: true
    center: false 
    transition: slide
    # logo and footer: 
    # logo: unitn.png
    footer: "Mattia Piazza | University of Trento, Italy"
    auto-play-media: true
    width: 1920
    height: 1080
    # html-math-method: katex #mathjax
    html-math-method: 
      method: mathjax
    code-fold: true
    # chalkboard: true
---

# Background

## My Background 

### Personal experience and research activity

:::{.round-img-gray style="width: 20%; position: absolute; top: -10%; left: 80%;"}
![](./data/people/mattia_piazza.jpeg)
:::

<br>
<br>

:::{.timeline}

:::{.item style="width: 20%; background-color: var(--secondary-color_light);"}
:::{.img-wrapper style="width: 95%;"}
![](./data/logos/UniudDPIA.png)
:::

:::{.arrow style="background-color: var(--primary-color);"}
2013-2017
:::
:::{.text}
- BSc in Mechanical Engineering 
:::
:::

:::{.item style="width: 20%; background-color: var(--primary-color_light);"}
:::{.img-wrapper style="width: 100%;"}
![](./data/logos/Unitn_logos/Dip_Ing_Industriale_col.png)
:::
:::{.arrow style="background-color: var(--secondary-color);"}
2017-2020
:::
:::{.text}
- MSc in Mechatronics Engineering
- Optimal control 
- MLT for Motorcycles
:::
:::

:::{.item style="width: 20%; background-color: var(--secondary-color_light);"}
:::{.img-wrapper}
![](./data/logos/Unitn_logos/UniTrento_logo_ENG_colore.png){width=120%}
![](https://static.dorna.com/assets/logos/mgp/brand/mgp-logo-on-light.svg?v2){width=70%}
:::
:::{.arrow style="background-color: var(--primary-color);"}
2020-2022
:::
:::{.text}
- Research Fellowship
- MLT for MotoGP Racing Team
:::
:::

:::{.item style="width: 20%; background-color: var(--primary-color_light);"}
:::{.img-wrapper}
![](./data/third_party/StellantisLogoshort.png){width=80%}
![](./data/third_party/VeDi2025-logo.png){width=80%}
![](./data/third_party/SunriseHD.png){width=80%}
:::

:::{.arrow style="background-color: var(--secondary-color);"}
2022-now
:::
:::{.text}
- PhD in Mechatronics and Systems Engineering
- OCP, Planning and AD
- Industrial collaborations
- MISE and Horizon Europe projects
:::
:::

:::{.item style="width: 20%; background-color: var(--secondary-color_light);"}
:::{.img-wrapper}
![](./data/logos/Unitn_logos/UniTrento_logo_ENG_colore.png){width=120%}
![](https://static.dorna.com/assets/logos/mgp/brand/mgp-logo-on-light.svg?v2){width=70%}
:::
:::{.arrow style="background-color: var(--primary-color);"}
now-future
:::
:::{.text}
- Finish my PhD 
- Spend a period abroad
- Start some fruitful collaborations
:::
:::

::: 
<!-- timeline end -->

::: {.notes}
Quick self-introduction (your background, relevant experience, and motivation for the visit).
A brief overview of your research trajectory (motorsport → optimal control → planning for AVs).
Mention your goal for this visit: Collaboration with planners or working with F1tenth.
Ask a rhetorical question or reference their work in RL and plan to set the stage for engagement.
:::


## VeDi2025 and SUNRISE Goals 
:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
VeDi2025
:::
::: {.columns}
:::: {.column width="80%"}
**CCAVs maneuver negotiation** through **V2X**:

- Develop a **real-time local planner** for autonomous driving.
  - **Dynamic** obstacle avoidance.
  - Cooperation and **negotiation**.
- **Validate** the planner with real-world testing.

::::
<!--- end column -->
:::: {.column width="20%"}
![](./data/third_party/VeDi2025-logo.png)
![](./data/third_party/StellantisLogoshort.png)
::::

::: 
<!-- end columns -->
:::

:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
SUNRISE
:::
::: {.columns}
:::: {.column width="25%" align-items="center" justify-content="center"}
![](./data/third_party/SunriseHD.png)
::::
:::: {.column width="75%"}
Safety Assurance Framework for the test and safety validation of CCAM systems.

- Identify logical scenarios and KPIs
- Run simulations to collect results.
- Propose a method to **evaluate and rank** autonomous agents.
::::
<!--- end column -->

::: 
<!-- end columns -->
:::


# Research motivations and contributions

## Autonomous Driving

:::{.columns}
:::: {.column width="50%"}
:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Safety Motivation
:::

- Improve **safety** and sustainability.
- 90\% of road accidents are due to **human errors**.
- EU target: zero road fatalities by 2050.
- Decrease traffic congestion and others.
:::
::::

:::: {.column width="50%"}

:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Open Challenges
:::

- Safe and robust **planning** and control.
- Operation in **emergency** scenarios.
- **Human-like** driving behavior.
- **Cooperation** and **negotiation** with other agents.
:::
::::
:::

:::{.columns}
:::: {.column width="50%"}
![](./data/intro_phd_Piccinini/occurrences_autonomous_driving.png){width=70% fig-align="center"}
::::

:::: {.column width="50%"}
![](./data/intro_phd_Piccinini/waymo_IPACE_3_resized.png){width=70% fig-align="center"}
::::
:::

## Contributions

### Semi-structured RRT* planner

:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
MPTree
:::

:::{.columns}

:::: {.column width="80%"}

Given a simple set of constraints the planner is able to

- compute feasible and optimal trajectory.
- handle dynamic obstacles.
- provide finite time guarantees.

::::

:::: {.column width="20%"}
![](./data/logos/MPTree_logo.png)
::::
:::

:::

:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Specialized Framework
:::
- **Autonomous Racing** MPTreeRace
- **Urban Driving** UrbanMPTree
:::


## Contributions
### C++ implementation and commercial software integration, SIL and HIL testing
:::{.tbbox}
:::{.columns}
:::: {.column width="70%"}
- Fast **C++** implementation of the planner.
- Integration with **IPG CarMaker**.
- Integration inside **RTMaps** and **dSpace** authera.
- Real-world testing with **Stellantis**.
::::
:::: {.column width="30%"}
::::
:::

:::{.columns}
:::: {.column width="33%"}
![](./data/third_party/IPG-Automotive-logo.png){width=90% fig-align="center"}
::::
:::: {.column width="33%"}
![](./data/third_party/dSpace_logo.png){width=90% fig-align="center"}
::::
:::: {.column width="33%" }
![](./data/third_party/StellantisLogoshort.png){width=90% fig-align="center"}
::::
:::

:::

# MPTree framework

## State-of-the-Art 
### Planning Approaches

|                   | Optimization-based planning              | Sampling/Graph-based planning        |
|-------------------|------------------------------------------|--------------------------------------|
| Optimum           | [**Local**]{style="color:red;"}          | [**Global**]{style="color:green;"}   |
| Time              | [**Fast**]{style="color:green;"}         | [**Slow**]{style="color:red;"}       |
| Dynamics          | [**Accurate**]{style="color:green;"}     | [**Limited**]{style="color:red;"}    |
| Obstacles         | [**Limited**]{style="color:red;"}        | [**Flexible**]{style="color:green;"} |
| Guarantees        | [**No finite-time**]{style="color:red;"} | [**Anytime**]{style="color:green;"}  |
| Continuity        | [**Recursive**]{style="color:green;"}    | [**Limited**]{style="color:red;"}    |


## Planner idea
### Combine the best of both worlds

Combine **OC** and **sampling-based** methods ensuring **dynamic obstacle avoidance**.

- RRT $^*$ with semi-structured tree exploration (sampling)
- MP (OC solutions) \cite{piazza2024mptree} [@piazza2024mptree]

Flexible approach, specialized for **autonomous urban** and **racing** scenarios.

## Framework Overview

<!-- ```{dot}
digraph finite_state_machine {
	fontname="Roboto,Menlo,Computer Modern,Helvetica,Arial,sans-serif"
	node [fontname="Roboto,Menlo,Computer Modern,Helvetica,Arial,sans-serif"]
	edge [fontname="Roboto,Menlo,Computer Modern,Helvetica,Arial,sans-serif"]
	// rankdir=LR;
  node [shape=box];
	Environment -> Perceive [label = "SS(a)"];

  subgraph cluster_plan {
		style=filled;
		color=lightgrey;
		node [style=filled,color=white];
		update -> prediction -> RRT -> OptimalTrajectory;
		label = "Planning";
	}

  subgraph cluster_int_update {
		style=filled;
		color=lightgrey;
		node [style=filled,color=white];
		prediction_obs -> road -> mesh;
		label = "Update";
	}

  subgraph cluster_RRT {
		style=filled;
		color=lightgrey;
		node [style=filled,color=white];
		RRT -> sample -> chooseParent -> rewire -> sample;
		label = "RRT*";
	}
	// node [shape = doublecircle]; Perceive LowLevel Environment;
	// node [shape = circle];
  update -> prediction_obs [label = "SS(a)"];
	Perceive -> update [label = "SS(B)"];
	OptimalTrajectory -> LowLevel [label = "SS(S)"];
	LowLevel -> Environment [label = "SS(b)"];
}
``` -->

<br>
![](./data/Diagrams/fig-MPTree-architecture.png)



## Mesh environment

:::{.columns}
:::: {.column width="50%"}
![](./data/Diagrams/fig-MPTree-map.png)
::::
:::: {.column width="50%"}

:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Road Representation
:::

- **Curvilinear coordinates:** employ clothoid (Frénet frame).
- **Waylines:** road cross section.
- **Waypoints:** sampled in the waylines.
- **Topology aware meshing**
:::

::::
:::


## Obstacle Handling

:::{.columns}
:::: {.column width="50%"}
![](./data/Diagrams//fig-Obs-VRU-02.png)
::::
:::: {.column width="50%"}
:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Obstacle Prediction
:::

- **Urban:** constant velocity model or minimum-time trajectory.
- **Additional waylines** at intersection.
- **Waypoints** in inhibited regions discarded.
:::


:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titleboxL}
Semi-structured RRT*
:::

- **Anytime approach:** finite-time solution.
- **Mixed sampling:** **Warm start**, **Structured** and **Random**
- **Connections** with optimal motion primitives.
:::

::::
:::


## Motion Primitives

### Common Lateral

:::{.columns}
:::: {.column width="50%"}
:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Formulation
:::

**$G^2$ clothoids** and **Continuous curvature** MP (closed-form solution).


$$
\begin{array}{r@{~}c@{~}l}
  &\displaystyle \min_{c(s)}& \; L\\
  &\mathrm{s.t}.&\left\{
  \begin{aligned}
    x^\prime(s)&=\cos{\theta}(s)\\
    y^\prime(s)&=\sin{\theta}(s)\\
    \theta^\prime(s)&=\kappa(s)\\
    \kappa^\prime(s)&=c(s) 
  \end{aligned}
  \right. \\
  &\mathrm{b.c.}& \left\{
  \begin{aligned}
    x(0) &= x_0, \; \\
    \theta(0) &= \theta_0, \; \\
    x(L) &= x_L, \; \\ 
    \theta(L) &= \theta_L, \; 
  \end{aligned}
  \begin{aligned}
    y(0) &= y_0, \\
    \kappa(0) &= \kappa_0\\
    y(L) &= y_L, \\ 
    \kappa(L) &= \kappa_L
  \end{aligned}
  \right.
\end{array}
$$

:::
::::
:::: {.column width="50%"}
<br>
<br>
<br>

![](./data/MP/CLOTH_N_road_K_road.png)
::::
:::

## Motion Primitives
### Urban longitudinal (Analytical)

:::{.columns}
:::: {.column width="50%"}
:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Formulation
:::

$$
  \begin{array}{r@{~}c@{~}l}
    &\displaystyle \min_{j_x(t)}& \; {\displaystyle \int_{0}^{T}{\big(w_T+j_x(t)^2\big)\,\mathrm{d} t}}  \\ \\
    &\mathrm{s.t.}& \left\{
    \begin{aligned}
      \dot{s}(t)&=v_x(t)\\
      \dot{v}_x(t)&=a_x(t)\\
      \dot{a}_x(t)&=j_x(t)
    \end{aligned}
    \right.\\
    &\mathrm{b.c.}& \left\{
    \begin{aligned}
      s(0)&=\ 0, \;\\
      v_x(0)&=v_0,\;\\
      a_x(0)&=a_0\;,
    \end{aligned}
    \begin{aligned}
      s(T)&=L\\
      v_x(T)&=v_T\\
      a_x(T)&=a_T
    \end{aligned}
    \right.\\
    \;
  \end{array}
$$
:::
::::
:::: {.column width="50%"}
<br>
<br>
<br>

![](./data/MP/MP_1020_space.png)
::::
:::

## Motion Primitives
### Racing longitudinal (Forward-Backward)

:::{.columns}
:::: {.column width="50%"}
:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Formulation
:::

$$
  \begin{array}{r@{~}c@{~}l}
    &\displaystyle \min_{a_x \in \mathbb A}& \; T \\
    &\mathrm{s.t.}& \left\{
    \begin{aligned}
      \dot{s}&=v_x\\
      \dot{v}_x&=a_x - c\,v_x - d\,v_x^2\\
      a_{x_{\mathrm{min}}} &\leq a_x \leq a_{x_{\mathrm{max}}}\\
      % |a_y| &\leq& a_{y_{\mathrm{max}}} 
      a_{y_{\mathrm{max}}} &\geq |a_y| = \kappa~v_x^2
    \end{aligned}
    \right.\;\\
    \\
    &\mathrm{b.c.}& \left\{
    \begin{aligned}
      s(0)&=0\\
      s(T)&=L\\
      v_x(0)&=v_0\\
      v_x(T)&=v_T
    \end{aligned}
    \right.
  \end{array}
$$
:::
::::
:::: {.column width="50%"}
<br>
<br>
<br>

![](./data/MP/MP_FWBW_space.png)
::::
:::



## Cost Function

### Urban multi-objective + negotiation

:::{.columns}
:::: {.column width="35%"}
![](./data/MPT_Piazza/Cooperative_approach.png)
::::
:::: {.column width="65%"}
:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Urban multi-objective
:::
$$
  J_{MO}={ \displaystyle\sum_{i=1}^{N_s}} \left(W_T~ J_T^i + W_L~ J_L^i + W_V~ J_{v_{x}}^i + W_{j_x}~ J_{j_x}^i + W_{a_y}~ J_{a_y}^i\right)
$$
:::

:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
\+ negotiation 
:::

$$
  J=J_{MO} + {\displaystyle\sum_{i=1}^{N_s}} \left({ W_{\mathrm{Neg}}~ J_{\mathrm{Neg}}} \right)
$$
[@piazza2025emergent]
:::

::::
:::
$$
  J_{\mathrm{Neg}}= \displaystyle\int_0^T (\mathrm{Act}(\Gamma_{\mathrm{obj_{des}}}(t) - \Gamma_{\mathrm{ego_{plan}}}(t),d_{th}))^2 \, \mathrm{d}t
$$

## Cost Function

### Racing

:::{.columns}
:::: {.column width="40%"}
<br>
<br>
<br>

![](./data/Diagrams/MPT_PistaAzzurra_scenario_1_plot_2_thicker.png)
::::
:::: {.column width="59%"}

:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Minimum Travel Time + Penalties
:::

$$
  J_{MO}={ \displaystyle\sum_{i=1}^{N_s}} W_T~ J_T^i
$$

Where $J_T^i$ depends only on the travel time.

Of course, we can integrate other cost functions to improve safety, robustness, and continuity with the previous solution.

$$
  J_{MO}={ \displaystyle\sum_{i=1}^{N_s}} \left( W_T~ J_T^i + W_C J_C^i + W_{\mathrm{pen}} J_{\mathrm{pen}}^i + \dots{} \right)
$$
:::

::::
:::

## Simulation results 

### MPTree race

<div id="contentframe" style="position:relative; left: 10%; width: 90%; height: 90%">
{{< video https://www.youtube.com/embed/INeFcYHTh58?rel=0  width="90%" height="90%" autoplay="true" loop="true" muted="true">}}
</div>



## Simulation results

### MPTree Urban (Matlab)

<div id="contentframe" style="position:relative; left: 10%; width: 90%; height: 90%">
{{< video https://www.youtube.com/embed/pt_zcB4BlT4?rel=0  width="90%" height="94.45%" autoplay="true" loop="true" muted="true">}}
</div>

## Projects VeDi 2025

::: {.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Goals 
:::
::: {.columns}
:::: {.column width="70%"}

- Develop a **real-time local planner** for autonomous driving.
  - **Dynamic** obstacle avoidance.
  - **Safety** and optimality of maneuver.
  - Cooperation and **negotiation**.
- Specializing planner for urban collaborative scenarios.
- **Validate** the planner with real-world testing.
- Test vehicle cooperation and **negotiation with CCAV** and V2X.

::::
<!--- end column -->
:::: {.column width="28%"}
![](./data/third_party/VeDi2025-logo.png)
![](./data/third_party/StellantisLogoshort.png)
::::
:::
:::

## Simulation results 

### MPTree urban uncooperative negotiation (Matlab)

<div id="contentframe" style="position:relative; left: 2.5%; width: 100%; height: 90%">
{{< video https://www.youtube.com/embed/ZGPrtMU95nA?rel=0  width="100%" height=90.40% autoplay="true" loop="true" muted="true">}} 
</div>

## Simulation results 

### MPTree urban cooperative negotiation (Matlab)

<div id="contentframe" style="position:relative; left: 2.5%; width: 100%; height: 90%">
{{< video https://www.youtube.com/embed/2HqBKIeUNFc?rel=0  width="100%" height=90.40% autoplay="true" loop="true" muted="true">}}
</div>


## C++ integration and closed loop testing {background-color="var(--secondary-color)"}

### Single-track model and C++ library

<!-- the average number of iteration average explored nodes with one obstacle two or 3 -->

| Obstacles | N. Iterations | N. Explored nodes |
|-----------|---------------|-------------------|
| Free      | ~800          | ~TBD              |
| 1         | ~600          | ~TBD              |
| 2         | ~500          | ~TBD              |
| 3         | ~400          | ~TBD              |

<div id="contentframe" style="position:relative; left: 23%; width: 55.75%; height: 55%">
{{< video https://www.youtube.com/embed/K4SPfdwC154?rel=0 width="100%" height=100% autoplay="true" loop="true" muted="true">}} 
</div>







## Integration in CarMaker

### SIL testing in IPG CarMaker and validated vehicle model

<div id="contentframe" style="position:relative; left: 10%; width: 90%; height: 90%">
{{< video https://www.youtube.com/embed/xxCWsTfNBKY?rel=0  width="100%" height="95%" autoplay="true" loop="true" muted="true">}}
</div>

## Integration in carmaker

### SIL testing for negotiation

:::{.columns}
:::: {.column width="58.4%"}
{{< video https://www.youtube.com/embed/R3iCVDXGoao?rel=0  width="100%" height=600 autoplay="true" loop="true" muted="true">}}
::::
::::{.column width="41.6%"}
{{< video https://www.youtube.com/embed/5qmvcFmvGVE?rel=0  width="100%" height=600 autoplay="true" loop="true" muted="true">}}
::::
:::


<!-- <div id="contentframe" style="position:relative; left: 0%; width: 60%; height: 90%">
{{< video https://www.youtube.com/embed/R3iCVDXGoao?rel=0  width="100%" height=600 autoplay="true" loop="true" muted="true">}}
</div>
<div id="contentframe" style="position:relative; left: 60%; width: 40%; height: 90%">
{{< video https://www.youtube.com/embed/5qmvcFmvGVE?rel=0  width="100%" height=600 autoplay="true" loop="true" muted="true">}}
</div> -->


## Real vehicle testing 

### VIL testing

```{=html}
<!-- add video -->
<div style="display: flex; justify-content: center; padding: 0px;">
  <video width="80%" height="70%" autoplay loop muted controls padding="0px">
    <source src="data/videos/videoVadenaAutonomous.mp4" type="video/mp4">
  </video>
</div>
```


## Real vehicle testing {background-color="var(--secondary-color)"}

### VIL velocity profiles

:::{.columns}
:::: {.column width="50%"}
:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Camera
:::
![](./data/Figures_UniTN_onlyCAM/speed_vs_dist_at30kmh.png)
:::
::::
:::: {.column width="50%"}
:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titleboxL}
V2X
:::
![](./data/Figures_UniTN_onlyV2X/speed_vs_dist_at30kmh.png)
:::
::::
:::

![](./data/Vadena/VadenaIntersection_traj_crop.png){width=50% fig-align="center"}


## Performance and limits {background-color="var(--secondary-color)"}

:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Performance
:::

- **Asimptotic** optimality.

:::

:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Limits
:::

- **Computational** time.
- **Quality** of the solution **highly** depends on the harware (Processor frequency).
- Time lost to evaluate useless solutions (No information cost forward).
:::

## Limits and future works {background-color="var(--secondary-color)"}
### Monte Carlo Tree Search





# Other projects

## SUNRISE - Safety Assurance Framework 
### Agents comparison and evaluation [@cherubini2024bootstrapped]

:::{.tbbox}
<!-- #### My Custom Title -->
::: {.titlebox}
Logical scenario
:::
:::{.columns}
:::: {.column width="30%"}
![](./data/img_ODD/ODD_highway_v2.png){width=100% fig-align="center"}
::::
:::: {.column width="70%"}
<!-- ![](./data/img_ODD/exit.png){width=50% fig-align="center"} -->

- Test vehicle **CCAM** and applications.
- Define common **metrics**, **KPIs**, **test cases**, and **logical parameters**
- Propose a method to **evaluate and rank** autonomous agents.


| Variable    | min     | max    | unit    |
|:-----------:|--------:|-------:|:--------|
| $v_0$       | $10.0$  | $25.0$ | $m/s$   |
| $v_1 - v_0$ | $-5.0$  | $7.0$  | $m/s$   |
| $T$         | $1.5$   | $7.5$  | $s$     |
| $a_1$       | $-6.0$  | $3.0$  | $m/s^2$ |
| $d$         | $-20.0$ | $40.0$ | $m$     |

::::
:::
:::

## SUNRISE 
### Agents comparison [@cherubini2024bootstrapped]

![](./data/img_ODD/slices.png){width=70% fig-align="center"}

## SUNRISE
### Possible usage

:::{.columns}
:::: {.column width="50%"}
![](./data/img_ODD/Stochastic model.png){width=100% fig-align="center"}
::::
:::: {.column width="50%"}
![](./data/img_ODD/consensus_data_1.png){width=80% fig-align="center"}
::::
:::

## SUNRISE
### Suggested distance 

![](./data/img_ODD/safe_charts.png){width=70% fig-align="center"}

## SUNRISE
### Suggested speed

![](./data/img_ODD/safe_speed.png){width=70% fig-align="center"}


## MLT for MotoGP {background-image="data/MLT/Moto/MotoLeanSimple.png" background-opacity="0.08"}
### Problem statement

<!-- {.background-image="data/MLT/Moto/MotoLeanSimple.png"} -->
:::{.columns}

:::: {.column width="40%"}
:::{.tbbox}
::: {.titlebox}
OCP
:::
$$
  \begin{aligned}
    \min \; T & = \min \int_0^L \frac{w_T}{\dot{s}} \, \mathrm{d}\zeta \\
    \mathrm{s.t.} \quad &\mathbf{A}(\mathbf{x},\mathbf{u}) \, \mathbf{\dot{x}} = \mathbf{b}(\mathbf{x},\mathbf{u}) \\
    \mathrm{Cyclic} \; \mathrm{b.c.} \quad &\mathbf{x}(0) = \mathbf{x}(L)\\
    % &\dot{s}(\zeta) = \frac{u(\zeta) \cos(\xi(\zeta)) - v(\zeta) \sin(\xi(\zeta))}{1-\kappa(\zeta) n(\zeta)} )
  \end{aligned}
$$
:::
::::

:::: {.column width="60%"}
:::{.tbbox}
::: {.titlebox}
Vehicle Dynamics
:::
- Rigid body model, internal DoF, slip dynamics ($30$ states).
- Engine torque envelope + chain tensioning effect.
- Soft penetration (tyre ground).
- Full tyre model (MF-MCTyre 1.1).
- Aerodynamic maps for drag lift and application point.
:::
::::

:::

:::{.notes}
(suspensions, steer, rider body position, wheels).
:::

## MLT for MotoGP {background-image="data/MLT/Moto/bikestraigth_flank.png" background-opacity="0.05"}
### How to initialize the problem 

:::{.notes}
Does everything work right out of the box? No, for sure this is a perfect recipe for a disaster.
So, Idea...
Solve a similar problem more treatable (less complex), convex, and quadratic.
Then solve iteratively a problem converging to the original one.
:::

:::{.columns}
:::: {.column width="40%"}
:::{.tbbox}
::: {.titlebox}
Initialization
:::

- **Convex** and **quadratic** problem
- **Simple** and **fast** solution
- **Iterative** solution
- **Convergence** to the original problem
- **Warm start** for the original problem

:::
::::
:::: {.column width="60%"} 
$$
  \min \int_0^L \frac{w_T}{\dot{s}} \, \mathrm{d}\zeta
$$

Tranformed into a "more" **quadratic** problem

:::{.notes}
Other terms might be added
:::

$$
  \min \int_0^L \left( \frac{w_T}{\dot{s}} + (\mathbf{x}-\mathbf{x_{qss}})^T \mathbf{W_{qss}}  (\mathbf{x}-\mathbf{x_{qss}})  \right) \, \mathrm{d}\zeta 
$$
::::
:::


## MLT for MotoGP {auto-animate=true auto-animate-easing="ease-in-out"}
### Continuation - Homotopy

Start by taking $w_T$ small and $\mathbf{W_{qss}}$ big (Constant linear velocity). 
Fixed initial conditions and free final conditions

![](./data/MLT/OCI/Track_Problem0.png){width=100% fig-align="center"}

## MLT for MotoGP {auto-animate=true auto-animate-easing="ease-in-out"}
### Continuation - Homotopy

Increase $w_T$ to 1 small and decrese $\mathbf{W_{qss}}$ to $0$.
Fixed initial conditions and free final conditions

![](./data/MLT/OCI/Track_Problem1.png){width=100% fig-align="center"}

## MLT for MotoGP {auto-animate=true auto-animate-easing="ease-in-out"}
### Continuation - Homotopy

$w_T = 1$ and $\mathbf{W_{qss}} = 0$.
Fixed initial conditions and final conditions equal to the initial conditions.

![](./data/MLT/OCI/Track_Problem2.png){width=100% fig-align="center"}

## MLT for MotoGP {auto-animate=true auto-animate-easing="ease-in-out"}
### Continuation - Homotopy

$w_T = 1$ and $\mathbf{W_{qss}} = 0$.
Cyclic conditions (Initial and final conditions are the same).

![](./data/MLT/OCI/Track_Problem3.png){width=100% fig-align="center"}

## MLT for MotoGP {auto-animate=true auto-animate-easing="ease-in-out"}
### Continuation - Homotopy

$w_T = 1$ and $\mathbf{W_{qss}} = 0$.
Cyclic conditions (Initial and final conditions are the same).
Push the penalty values on constraints.

![](./data/MLT/OCI/Track_Problem4.png){width=100% fig-align="center"}


## MLT for MotoGP {auto-animate=true auto-animate-easing="ease-in-out" auto-animate-duration=1.0}
### Continuation - Homotopy

Compare solutions

![](./data/MLT/OCI/Track_problemCompare.png){width=100% fig-align="center"}

## MLT for MotoGP
### Solution example Catalunya RSV1000

<div id="contentframe" style="position:relative; left: 10%; width: 90%; height: 90%">
{{< video https://www.youtube.com/embed/b1tqsGL5tgA?rel=0  width="100%" height="87%" autoplay="true" loop="true" muted="true">}}
</div>


## 3 Points Dubins Path [@piazza2024efficient;@piazza2024non]

:::{.columns}
:::: {.column width="50%"}
An efficient algorithm to solve the 3PDP problem.

| Algorithm | Iterations | Time ($ms$) | N. Dubins calls |
|-----------|------------|-------------|-----------------|
| PS        | 88.35      | 0.217       | $\sim$ 176       |
| PS + 748  | 77.70      | 0.187       | $\sim$ 155       |
| PT        | 74.78      | 0.179       | $\sim$ 149       |
| [PT + 748]{style="color: red;"}  | [68.54]{style="color: red;"}      | 0.163       | $\sim$ 137       |
| DBM       | 360        | 55.577      | 720             |
| iDPP      | 128        | 19.720      | 256             |
::::
:::: {.column width="50%"}
![](./data/Tikz/onepoint_final_rev.png){width=70% fig-align="center"}
::::
:::


# Future works {background-color="var(--secondary-color)"}

## Monte Carlo Tree Search on scale vehicles {background-color="var(--secondary-color)"}

## Sampling based initialization of MPC {background-color="var(--secondary-color)"}

## MLT Motorcycle {background-color="var(--secondary-color)"}
### Free rider position, gearbox, and CFD aerodynamic maps


## References

::: {#refs}
:::


## {background-video="data/third_party/end.mov" background-video-loop="true" background-video-muted="true" background-video-autoplay="true" }

<br>
<br>
<br>

::: {.tbbox style="text-align: center;" }
<!-- #### Q & A -->
##### Thank you for your attention!
<!-- ##### Danke für Ihre Aufmerksamkeit! -->
:::